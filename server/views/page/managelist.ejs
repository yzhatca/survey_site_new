<%- include ../partials/header.ejs %>

<%- include ../partials/main_nav.ejs %>
<div>
    <div>
        <h1>Surveys</h1>
        <br>
        <a href="/survey/add">Add Survey</a>
        <table>
            <!-- Header Row -->
            <tr>
                <th>Survey Name</th>
                <th>Description</th>
                <th>End Date</th>
                <th>EDIT Survey</th>
                <th>DELETE Survey</th>
            </tr>

           <!-- Repeatable Template Row -->
           <% for(let item of SurveyList) { %>
            <tr>
                <td>
                    <%= item.title %>
                </td>
                <td>
                    <%= item.description %>
                </td>
                <td>
                    <%= item.endTime.toISOString().split('T')[0] %>
                </td>
                <td>
                    <a href="/survey/update/<%= item._id %>">
                        <i class="bi bi-check-square"></i>EDIT Survey</a>
                </td>
                <td>
                    <a href="/survey/delete/<%= item._id %>" onclick="return confirm('Are you sure you want to delete?')">
                        <i class="bi bi-check-square"></i>DELETE Survey</a>
                </td>
            </tr>
            <% } %>
        </table>
        
        <!-- Pagination Controls -->
        <div>
            <% if(currentPage > 1) { %>
                <a href="/survey/manage?page=<%= currentPage - 1 %>">Prev</a>
            <% } %>
            Page <%= currentPage %> of <%= totalPages %>
            <% if(currentPage < totalPages) { %>
                <a href="/survey/manage?page=<%= currentPage + 1 %>">Next</a>
            <% } %>
        </div>
    </div>
</div>
<%- include ../partials/footer.ejs %>
